:root{
  --bg1:#ffd3d6;
  --bg2:#ff9aa2;
  --envelope:#fff6f8;
  --accent:#ff577f;
}
*{box-sizing:border-box}
html,body{height:100%}
body{
  margin:0;
  font-family:Inter, system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial;
  background: linear-gradient(135deg,var(--bg1),var(--bg2));
}
.page{display:flex;flex-direction:column;align-items:center;justify-content:center;height:100vh;padding:2rem}
.envelope-wrapper{display:flex;flex-direction:column;align-items:center;justify-content:center;flex:1}
.envelope{
  width:340px;
  max-width:90vw;
  height:220px;
  position:relative;
  perspective:900px;
  cursor:pointer;
}
.envelope .body{
  width:100%;height:100%;background:var(--envelope);border-radius:8px;box-shadow:0 8px 25px rgba(0,0,0,0.18);overflow:hidden;position:relative;
}
.envelope .flap{
  position:absolute;left:0;right:0;top:0;height:58%;background:linear-gradient(180deg,#ffe1e4 0%, #ffd6dc 100%);transform-origin:top center;border-radius:8px;z-index:4;display:flex;align-items:center;justify-content:center;transition:transform 700ms cubic-bezier(.2,.9,.2,1), box-shadow 200ms;
  box-shadow:0 6px 18px rgba(0,0,0,0.12);
}
.envelope .flap::after{
  content:'';position:absolute;left:0;right:0;bottom:-6px;height:40px;background:linear-gradient(180deg,#ffb6c1, transparent);
}
.envelope .letter{
  position:absolute;
  left:6%;
  right:6%;
  top:50%;
  bottom:auto;
  background:linear-gradient(180deg,#fff 0%,#fff9fb 100%);
  border-radius:6px;
  padding:1.2rem;
  display:flex;
  flex-direction:column;
  align-items:center;
  justify-content:center;
  transform:translateY(12px);
  opacity:0;
  transition:transform 700ms cubic-bezier(.2,.9,.2,1), opacity 400ms;
  z-index:2;
  font-size:1.1rem;
  color:#662;
}
.envelope .heart{font-size:48px;color:var(--accent);transform:scale(0);transition:transform 400ms 450ms cubic-bezier(.2,.9,.2,1)}
.envelope .message{margin:0;margin-top:.6rem;text-align:center}
.envelope.open .flap{transform:rotateX(-180deg);box-shadow:0 2px 8px rgba(0,0,0,0.08)}
.envelope.open .letter{transform:translateY(-50%);opacity:1}
.envelope.open .heart{transform:scale(1);}
.hint{margin-top:1rem;color:#6b2832;font-size:0.95rem}
.controls{margin-top:1rem;display:flex;gap:0.6rem;align-items:center;justify-content:center;opacity:0;transform:translateY(8px);transition:opacity 420ms ease, transform 420ms ease;pointer-events:none}
.btn{display:inline-block;padding:0.6rem 1rem;border-radius:999px;text-decoration:none;font-weight:600;box-shadow:0 6px 18px rgba(0,0,0,0.08);transition:transform 160ms ease, box-shadow 160ms ease}
.next-btn{background:var(--accent);color:white}
.next-btn:hover{transform:translateY(-3px);box-shadow:0 10px 22px rgba(0,0,0,0.12)}
.next-btn:active{transform:translateY(-1px)}
.next-btn:focus{outline:3px solid rgba(255,87,127,0.18);outline-offset:3px}

/* show controls only when envelope is opened */
.envelope.open ~ .controls{opacity:1;transform:translateY(0);pointer-events:auto}
.sr-only{position:absolute;width:1px;height:1px;padding:0;margin:-1px;overflow:hidden;clip:rect(0,0,0,0);white-space:nowrap;border:0}
@media (max-width:420px){
  .envelope{height:200px}
  .envelope .heart{font-size:38px}
}

/* Heart effects */
.hearts{position:relative;width:340px;max-width:90vw;height:260px;margin-top:0;pointer-events:none;z-index:6;display:block}
.floating-heart{
  position:absolute;left:0;top:0;transform-origin:center center;display:inline-block;font-size:20px;color:var(--accent);filter:drop-shadow(0 4px 8px rgba(0,0,0,0.12));will-change:transform,opacity;opacity:0}

@keyframes heartFloat {
  0%{transform:translateY(10px) scale(0.9) rotate(0deg);opacity:0}
  10%{opacity:1}
  100%{transform:translateY(-160px) translateX(var(--drift,0px)) scale(1.08) rotate(20deg);opacity:0}
}

@keyframes heartPop {
  0%{transform:scale(0.2);opacity:0}
  60%{transform:scale(1.12);opacity:1}
  100%{transform:scale(1);opacity:1}
}

.floating-heart.pop{animation: heartPop 360ms cubic-bezier(.2,.9,.2,1);}
.floating-heart.float{animation: heartFloat var(--duration,2200ms) linear forwards;}

@media (max-width:420px){
  .floating-heart{font-size:16px}
}
